{"version":3,"sources":["panels/Home.js","App.js","index.js"],"names":["clack","Howl","src","click","stopSound","currentCategory","spinnerRotation","spinnerSpeed","frameCount","stopWheel","document","getElementById","disabled","classList","add","play","requestAnimationFrame","remove","spinWheel","lastCategory","style","transform","Math","floor","prizes","color","backgroundColor","text","innerText","console","log","pointer","stop","updateCategory","random","startWheel","randVal","setTimeout","Home","id","fetchedUser","go","before","photo_200","description","city","title","first_name","last_name","width","height","version","viewBox","d","fill","type","onClick","className","App","useState","activePanel","setActivePanel","setUser","size","useEffect","a","connect","send","user","subscribe","detail","data","schemeAttribute","createAttribute","value","scheme","body","attributes","setNamedItem","fetchData","e","currentTarget","dataset","to","ReactDOM","render"],"mappings":"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","file":"static/js/main.2fad6e66.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader';\nimport Group from '@vkontakte/vkui/dist/components/Group/Group';\nimport Cell from '@vkontakte/vkui/dist/components/Cell/Cell';\nimport Avatar from '@vkontakte/vkui/dist/components/Avatar/Avatar';\nimport './Home.css';\nimport {Howl} from 'howler';\n\n/* audio code */\nvar clack = new Howl({\n  src: [\n    'https://2gd4.me/salty/audio/sfx/menu_move.ogg',\n    'https://2gd4.me/salty/audio/sfx/menu_move.wav',\n  ]\n});\nvar click = new Howl({\n  src: [\n    'https://2gd4.me/salty/audio/sfx/question_show.ogg',\n    'https://2gd4.me/salty/audio/sfx/question_show.wav',\n  ]\n});\nvar stopSound = new Howl({\n  src: [\n    'https://2gd4.me/salty/audio/sfx/option_highlight.ogg',\n    'https://2gd4.me/salty/audio/sfx/option_highlight.wav'\n  ]\n});\n\n/* spinner code */\nvar currentCategory = 2;\nvar spinnerRotation = 15;\nvar spinnerSpeed = 0;\nvar friction = 0.02;\nvar frameCount = 0;\nfunction updateCategory(){\n  const prizes = [\n    0,\n    1,\n    2,\n    3,\n    4,\n    5,\n  ][currentCategory];\n\n  var color = [\n    \"#ff2b48\"\n  , \"#ffa72b\"\n  , \"#fff421\"\n  , \"#44f21d\"\n  , \"#2d91fc\"\n  , \"#c93ef7\"\n  ][currentCategory];\n  document.getElementById(\"wrapper\").style.backgroundColor = color;\n  document.getElementById(\"spin_button\").style.color = color;\n  var text = [\n    \"Подарок №1\"\n  , \"Подарок №2\"\n  , \"Подарок №3\"\n  , \"Подарок №4\"\n  , \"Подарок №5\"\n  , \"Подарок №6\"\n  ][currentCategory];\n\n  if (prizes == 0 || prizes == 3 || prizes == 5) {\n    document.getElementById(\"category\").innerText = text + \"хуй\";\n  }\n\n  else if (prizes == 1 || prizes == 2 || prizes == 4) {\n    document.getElementById(\"category\").innerText = text + \"поздравляем\";\n  }\n\n  \n  console.log(text);\n  console.log(prizes);\n  \n  var pointer =  document.getElementById(\"pointer_content\");\n  if (spinnerSpeed > 0) {\n   pointer.classList.add(\"nudged_right\");\n  } else {\n   pointer.classList.add(\"nudged_left\");\n  }\n  \n  pointer.classList = \"\";\n  clack.stop();\n  clack.play();\n}\nfunction stopWheel(){\n document.getElementById(\"spin_button\").disabled = false; document.getElementById(\"roulette_wheel\").classList.add(\"highlight\");\n  stopSound.play();\n  spinnerSpeed = 0;\n  requestAnimationFrame(function(){\ndocument.getElementById(\"roulette_wheel\").classList.remove(\"highlight\");\n  })\n}\nfunction spinWheel(){\n  var lastCategory = currentCategory;\n  spinnerRotation += spinnerSpeed;\n  if (spinnerRotation >= 360 || spinnerRotation < 0) {\n    spinnerRotation = (360 + spinnerRotation) % 360;\n  }\n  document.getElementById(\"roulette_image\").style.transform = \"rotate(\" + (135 - spinnerRotation) + \"deg)\";\n\n  if (lastCategory != Math.floor(spinnerRotation / 60) % 6) {\n    currentCategory = Math.floor(spinnerRotation / 60);\n    updateCategory(currentCategory);\n  }\n  if (frameCount) {\n    spinnerSpeed *= 1 - friction;\n    frameCount--;\n  } else {\n    spinnerSpeed *= 1 - (friction * (0.75 + 0.25 * Math.random()));\n    frameCount = 30;\n  }\n  if (spinnerSpeed > 0.5 || spinnerSpeed < -0.5) {\n    requestAnimationFrame(spinWheel);\n  } else {\n    requestAnimationFrame(stopWheel);\n  }\n}\n\nfunction startWheel(){\n  click.play();\n  document.getElementById(\"spin_button\").disabled = true;\n  document.getElementById(\"category\").classList.remove(\"active\");\n\n\n  var randVal = Math.random() * 2 - 1;\n  spinnerSpeed = randVal * 40 + (randVal < 0 ? -40 : 40);\n  console.log(\"start speed: \" + spinnerSpeed);\n  \n  setTimeout(spinWheel, 600);\n}\n\nconst Home = ({ id, go, fetchedUser }) => (\n\t\n\t<Panel id={id}>\n    {fetchedUser &&\n\t\t<PanelHeader before={fetchedUser.photo_200 ? <Avatar src={fetchedUser.photo_200}/> : null}\n\t\t\t\tdescription={fetchedUser.city && fetchedUser.city.title ? fetchedUser.city.title : ''}\n\t\t\t>\n\t\t\t\t{`${fetchedUser.first_name} ${fetchedUser.last_name}`}Крути Колесо фортуны</PanelHeader>}\n\n\t\t<Group title=\"Navigation Example\">\n\t\t<div id=\"wrapper\">\n  <div id=\"roulette\">\n    <div id=\"roulette_wheel\">\n      <div id=\"roulette_image\"></div>\n      <span id=\"pointer\">\n      <svg id=\"pointer_content\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\">\n<path d=\"m8 4c-1.5803.00017-3.0125.93093-3.6543 2.375l-4.2227 9.502 9.502-4.2227c1.4441-.64181 2.3748-2.074 2.375-3.6543.000233-2.2091-1.7909-4.0002-4-4z\" fill=\"#fff\"/>\n<path d=\"m8 6a2 2 0 00-2 2 2 2 0 002 2 2 2 0 002-2 2 2 0 00-2-2z\" fill=\"#000\"/>\n</svg>\n      </span>\n    </div>\n  </div>\n  <div id=\"controls\">\n    <button id=\"spin_button\" type=\"button\" onClick={startWheel}>крутить</button>\n    <div id=\"category\" className=\"active\">Подарок №3</div>\n  </div>\n</div>\n\t\t</Group>\n\t</Panel>\n);\n\nHome.propTypes = {\n\tid: PropTypes.string.isRequired,\n\tgo: PropTypes.func.isRequired,\n\tfetchedUser: PropTypes.shape({\n\t\tphoto_200: PropTypes.string,\n\t\tfirst_name: PropTypes.string,\n\t\tlast_name: PropTypes.string,\n\t\tcity: PropTypes.shape({\n\t\t\ttitle: PropTypes.string,\n\t\t}),\n\t}),\n};\n\nexport default Home;\n","import React, { useState, useEffect } from 'react';\nimport connect from '@vkontakte/vk-connect';\nimport View from '@vkontakte/vkui/dist/components/View/View';\nimport ScreenSpinner from '@vkontakte/vkui/dist/components/ScreenSpinner/ScreenSpinner';\nimport '@vkontakte/vkui/dist/vkui.css';\n\n\nimport Home from './panels/Home';\n\n\nconst App = () => {\n\tconst [activePanel, setActivePanel] = useState('home');\n\tconst [fetchedUser, setUser] = useState(null);\n\tconst [popout, setPopout] = useState(<ScreenSpinner size='large' />);\n\n\tuseEffect(() => {\n\t\tconnect.subscribe(({ detail: { type, data }}) => {\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t}\n\t\t});\n\t\tasync function fetchData() {\n\t\t\tconst user = await connect.send('VKWebAppGetUserInfo');\n\t\t\tsetUser(user);\n\t\t\n\t\t}\n\t\tfetchData();\n\t}, []);\n\n\tconst go = e => {\n\t\tsetActivePanel(e.currentTarget.dataset.to);\n\t};\n\n\treturn (\n\t\n\t\t<View activePanel={activePanel} >\n\t\t\t<Home id='home' fetchedUser={fetchedUser} go={go} />\n\t\t</View>\n\n\t);\n}\n\nexport default App;\n\n","import 'core-js/features/map';\nimport 'core-js/features/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vk-connect';\nimport App from './App';\n// import registerServiceWorker from './sw';\n\n// Init VK  Mini App\nconnect.send('VKWebAppInit');\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT\n// registerServiceWorker();\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}